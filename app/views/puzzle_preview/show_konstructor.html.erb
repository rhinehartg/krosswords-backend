<!DOCTYPE html>
<html>
<head>
  <title>Konstructor Puzzle Preview - Puzzle #<%= @puzzle.id %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .header h1 {
      margin: 0 0 10px 0;
      color: #9b59b6;
    }
    .puzzle-container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .clue-section {
      margin-bottom: 30px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
      border-left: 4px solid #9b59b6;
    }
    .clue-section h3 {
      margin: 0 0 10px 0;
      color: #333;
    }
    .clue-text {
      font-size: 18px;
      color: #666;
      font-style: italic;
    }
    .words-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .word-card {
      background: #fff;
      border: 2px solid #9b59b6;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: #9b59b6;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .word-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(155, 89, 182, 0.3);
    }
    .word-length {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
      font-weight: normal;
    }
    .words-stats {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .stat-item {
      background: #f8f9fa;
      padding: 10px 15px;
      border-radius: 6px;
      border-left: 3px solid #9b59b6;
    }
    .stat-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }
    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #9b59b6;
    }
    .back-link {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background: #6c757d;
      color: white;
      text-decoration: none;
      border-radius: 5px;
    }
    .back-link:hover {
      background: #5a6268;
    }
    .info-section {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Konstructor Puzzle Preview</h1>
    <p>Puzzle ID: #<%= @puzzle.id %> | Created: <%= @puzzle.created_at.strftime('%Y-%m-%d %H:%M') %></p>
  </div>
  
  <div class="puzzle-container">
    <div class="clue-section">
      <h3>Puzzle Clue/Theme:</h3>
      <div class="clue-text"><%= @puzzle_clue %></div>
    </div>
    
    <div class="words-stats">
      <div class="stat-item">
        <div class="stat-label">Total Words</div>
        <div class="stat-value"><%= @words.length %></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Total Letters</div>
        <div class="stat-value"><%= @words.sum(&:length) %></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Average Length</div>
        <div class="stat-value"><%= @words.length > 0 ? (@words.sum(&:length).to_f / @words.length).round(1) : 0 %></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Longest Word</div>
        <div class="stat-value"><%= @words.max_by(&:length)&.length || 0 %> letters</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Shortest Word</div>
        <div class="stat-value"><%= @words.min_by(&:length)&.length || 0 %> letters</div>
      </div>
    </div>
    
    <div>
      <h3 style="margin-bottom: 15px; color: #333;">Words to Place on Grid:</h3>
      <div class="words-grid">
        <% @words.each_with_index do |word, index| %>
          <div class="word-card">
            <%= word %>
            <div class="word-length"><%= word.length %> letters</div>
          </div>
        <% end %>
      </div>
    </div>
    
    <div class="info-section">
      <strong>Game Instructions:</strong><br>
      Players will arrange these words on a 12×12 grid to create a connected crossword. Words can be placed horizontally or vertically, and players can add extra valid English words to help connect the target words. Compact, interlocking layouts score better than loose, sprawling ones.
    </div>
  </div>
  
  <a href="<%= admin_puzzle_path(@puzzle) %>" class="back-link">← Back to Puzzle</a>
</body>
</html>

